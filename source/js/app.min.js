const doForms=async e=>{const s=await fetch("../lib/run.php",{method:"POST",body:e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:"same-origin"});if(s.ok){const e=await s.json();return Promise.resolve(e)}return Promise.reject("Серверная ошибка отправки данных.")};function addSpace(e){return e.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")}let mediaWidth=document.documentElement.clientWidth;const newMessage=(e,s)=>{let t=document.createElement("span");return t.innerHTML=e,s?t.classList.add("success"):t.classList.add("error"),t};document.querySelector(".header--fix").classList.remove("header--fix");let h=document.querySelector(".header__wrapper");function onScroll(){window.addEventListener("scroll",(function(){window.pageYOffset>150?h.classList.add("header--fix"):h.classList.remove("header--fix")}))}window.onload=()=>{onScroll()},document.querySelector(".nav--nojs").classList.remove("nav--nojs");let burger=document.querySelector(".nav__burger"),menuMobile=document.querySelector(".nav__menu");burger.addEventListener("click",(e=>{e.preventDefault(),menuMobile.classList.toggle("nav__menu--open"),burger.classList.toggle("nav__burger--open")}));let modalCalc=document.querySelector("#calculator"),modalCalcButton=document.querySelector("[data-modal=calculator]"),modalCalcClose=modalCalc.querySelector(".modal__close");modalCalcButton&&modalCalcButton.addEventListener("click",(e=>{e.preventDefault(),modalCalc.classList.contains("modal--open")||modalCalc.classList.add("modal--open")})),modalCalcClose.addEventListener("click",(e=>{e.preventDefault(),modalCalc.classList.contains("modal--open")&&modalCalc.classList.remove("modal--open")}));let calcBtn=document.querySelector(".header__calc"),calcBody=document.querySelector(".hero__calc");calcBtn&&(calcBody?calcBtn.addEventListener("click",(e=>{e.preventDefault(),calcBody.classList.toggle("hero__calc--open"),calcBtn.classList.toggle("header__calc--opened"),calcBody.classList.contains("hero__calc-ext")&&calcBody.classList.toggle("hero__calc--separate")})):calcBtn.addEventListener("click",(e=>{e.preventDefault(),modalCalc.classList.contains("modal--open")||modalCalc.classList.add("modal--open")})));let calcBtnPrice=document.querySelector(".price__link-calk");calcBtnPrice&&calcBtnPrice.addEventListener("click",(e=>{e.preventDefault(),modalCalc.classList.contains("modal--open")||modalCalc.classList.add("modal--open")}));let modalCost=document.querySelector("#cost"),modalCostButtons=document.querySelectorAll("[data-modal=cost]"),modalCostClose=modalCost.querySelector(".modal__close");modalCostButtons.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),modalCost.classList.contains("modal--open")||modalCost.classList.add("modal--open")}))})),modalCostClose.addEventListener("click",(e=>{e.preventDefault(),modalCost.classList.contains("modal--open")&&modalCost.classList.remove("modal--open")}));let modalContract=document.querySelector("#contract"),modalContractButton=document.querySelectorAll("[data-modal=kontrakt]"),modalContractClose=modalContract.querySelector(".modal__close");modalContractButton.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),modalContract.classList.contains("modal--open")||modalContract.classList.add("modal--open")}))})),modalContractClose.addEventListener("click",(e=>{e.preventDefault(),modalContract.classList.contains("modal--open")&&modalContract.classList.remove("modal--open")}));let modalCallback=document.querySelector("#callback"),modalCallbackButton=document.querySelectorAll("[data-modal=callback]"),modalCallbackClose=modalCallback.querySelector(".modal__close");modalCallbackButton.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),modalCallback.classList.contains("modal--open")||modalCallback.classList.add("modal--open")}))})),modalCallbackClose.addEventListener("click",(e=>{e.preventDefault(),modalCallback.classList.contains("modal--open")&&modalCallback.classList.remove("modal--open")}));let calculatorRange=document.querySelector(".hero__calc-area-range");if(calculatorRange){let e=document.querySelector(".hero__calc-area-input"),s=document.querySelector("#construction-type"),t=document.querySelector("#repair-type"),a=document.querySelectorAll("[name=hrepairtype]"),l=document.querySelectorAll(".hero__calc-item--control"),o=document.querySelector(".hero__calc-total-js"),r=document.querySelector(".hero__calc-period-from"),i=document.querySelector(".hero__calc-period-to"),c=0,n=0,d=0,m=0,u=0,p=0,_=0,v=0,L=0;function calcUpdate(){c=parseFloat(t.value),n=parseFloat(s.value),d=parseFloat(document.querySelector("[name=hrepairtype]:checked").value),m=1+calculateAdditional(),u=c*n*d*m,p=parseInt(calculatorRange.value),_=(u*p).toFixed(0),v=(_/1e4).toFixed(0),L=(_/7e3).toFixed(0),_=(.09*_).toFixed(0),o.textContent=addSpace(_),r.textContent=v,i.textContent=L}function calculateAdditional(){let e=0;return l.forEach((s=>{s.checked&&(e+=parseFloat(s.value))})),e}calcUpdate(),calculatorRange.addEventListener("input",(()=>{e.value=calculatorRange.value,p=parseInt(e.value),calcUpdate()})),e.addEventListener("input",(()=>{calculatorRange.value=e.value,p=parseInt(calculatorRange.value),calcUpdate()})),t.addEventListener("input",(()=>{c=parseFloat(t.value),calcUpdate()})),s.addEventListener("input",(()=>{n=parseFloat(s.value),calcUpdate()})),a.forEach((e=>{e.addEventListener("input",(s=>{d=parseFloat(e.value),calcUpdate()}))})),l.forEach((e=>{e.addEventListener("input",(e=>{m=calculateAdditional(),calcUpdate()}))}))}let btnPrev=document.querySelector(".videoreviews .carousel__prev"),btnNext=document.querySelector(".videoreviews .carousel__next"),videoPosts=document.querySelectorAll(".videoreviews__demo-item"),conutPosts=videoPosts.length,startIndx=0,endIndx=document.querySelectorAll(".videoreviews .carousel__slide--desktop").length-1;btnPrev&&btnNext&&videoPosts&&(btnNext.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?endIndx<conutPosts-1&&videoPosts[startIndx].classList.contains("carousel__slide--mobile")&&videoPosts[startIndx].classList.contains("carousel__slide--desktop")&&(videoPosts[startIndx].classList.remove("carousel__slide--mobile"),videoPosts[startIndx].classList.remove("carousel__slide--desktop"),startIndx++,videoPosts[startIndx].classList.add("carousel__slide--mobile"),endIndx++,videoPosts[endIndx].classList.add("carousel__slide--desktop")):startIndx<conutPosts-1&&videoPosts[startIndx].classList.contains("carousel__slide--mobile")&&(videoPosts[startIndx].classList.remove("carousel__slide--mobile"),startIndx++,videoPosts[startIndx].classList.add("carousel__slide--mobile"))})),btnPrev.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?startIndx>0&&videoPosts[startIndx].classList.contains("carousel__slide--mobile")&&videoPosts[startIndx].classList.contains("carousel__slide--desktop")&&(videoPosts[startIndx].classList.remove("carousel__slide--mobile"),videoPosts[endIndx].classList.remove("carousel__slide--desktop"),endIndx--,startIndx--,videoPosts[startIndx].classList.add("carousel__slide--mobile"),videoPosts[startIndx].classList.add("carousel__slide--desktop")):startIndx>0&&videoPosts[startIndx].classList.contains("carousel__slide--mobile")&&(videoPosts[startIndx].classList.remove("carousel__slide--mobile"),startIndx--,videoPosts[startIndx].classList.add("carousel__slide--mobile"))})));let prev=document.querySelector(".repairs__demo .carousel__prev"),next=document.querySelector(".repairs__demo .carousel__next"),repairPosts=document.querySelectorAll(".repairs__type"),conutRepairs=repairPosts.length,startRepairs=0,endRepairs=document.querySelectorAll(".repairs__types .carousel__slide--desktop").length-1;prev&&next&&repairPosts&&(next.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?endRepairs<conutRepairs-1&&repairPosts[startRepairs].classList.contains("carousel__slide--mobile")&&repairPosts[startRepairs].classList.contains("carousel__slide--desktop")&&(repairPosts[startRepairs].classList.remove("carousel__slide--mobile"),repairPosts[startRepairs].classList.remove("carousel__slide--desktop"),startRepairs++,repairPosts[startRepairs].classList.add("carousel__slide--mobile"),endRepairs++,repairPosts[endRepairs].classList.add("carousel__slide--desktop")):startRepairs<conutRepairs-1&&repairPosts[startRepairs].classList.contains("carousel__slide--mobile")&&(repairPosts[startRepairs].classList.remove("carousel__slide--mobile"),startRepairs++,repairPosts[startRepairs].classList.add("carousel__slide--mobile"))})),prev.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?startRepairs>0&&repairPosts[startRepairs].classList.contains("carousel__slide--mobile")&&repairPosts[startRepairs].classList.contains("carousel__slide--desktop")&&(repairPosts[startRepairs].classList.remove("carousel__slide--mobile"),repairPosts[endRepairs].classList.remove("carousel__slide--desktop"),endRepairs--,startRepairs--,repairPosts[startRepairs].classList.add("carousel__slide--mobile"),repairPosts[startRepairs].classList.add("carousel__slide--desktop")):startRepairs>0&&repairPosts[startRepairs].classList.contains("carousel__slide--mobile")&&(repairPosts[startRepairs].classList.remove("carousel__slide--mobile"),startRepairs--,repairPosts[startRepairs].classList.add("carousel__slide--mobile"))})));let prevTestestimonial=document.querySelector(".testimonials__video .carousel__prev"),nextTestestimonial=document.querySelector(".testimonials__video .carousel__next"),testimonialPosts=document.querySelectorAll(".testimonials__video-item"),conutTestestimonials=testimonialPosts.length,startTestestimonials=0,endTestestimonials=document.querySelectorAll(".testimonials__video-items .carousel__slide--desktop").length-1;prevTestestimonial&&nextTestestimonial&&testimonialPosts&&(nextTestestimonial.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?endTestestimonials<conutTestestimonials-1&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--mobile")&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--desktop")&&(testimonialPosts[startTestestimonials].classList.remove("carousel__slide--mobile"),testimonialPosts[startTestestimonials].classList.remove("carousel__slide--desktop"),startTestestimonials++,testimonialPosts[startTestestimonials].classList.add("carousel__slide--mobile"),endTestestimonials++,testimonialPosts[endTestestimonials].classList.add("carousel__slide--desktop")):startTestestimonials<conutTestestimonials-1&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--mobile")&&(testimonialPosts[startTestestimonials].classList.remove("carousel__slide--mobile"),startTestestimonials++,testimonialPosts[startTestestimonials].classList.add("carousel__slide--mobile"))})),prevTestestimonial.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?startTestestimonials>0&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--mobile")&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--desktop")&&(testimonialPosts[startTestestimonials].classList.remove("carousel__slide--mobile"),testimonialPosts[endTestestimonials].classList.remove("carousel__slide--desktop"),endTestestimonials--,startTestestimonials--,testimonialPosts[startTestestimonials].classList.add("carousel__slide--mobile"),testimonialPosts[startTestestimonials].classList.add("carousel__slide--desktop")):startTestestimonials>0&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--mobile")&&(testimonialPosts[startTestestimonials].classList.remove("carousel__slide--mobile"),startTestestimonials--,testimonialPosts[startTestestimonials].classList.add("carousel__slide--mobile"))})));let prevTeam=document.querySelector(".team__composition .carousel__prev"),nextTeam=document.querySelector(".team__composition .carousel__next"),teamPosts=document.querySelectorAll(".team__person"),conutTeam=teamPosts.length,startTeam=0,endTeam=document.querySelectorAll(".team__list .carousel__slide--desktop").length-1;prevTeam&&nextTeam&&teamPosts&&(nextTeam.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?endTeam<conutTeam-1&&teamPosts[startTeam].classList.contains("carousel__slide--mobile")&&teamPosts[startTeam].classList.contains("carousel__slide--desktop")&&(teamPosts[startTeam].classList.remove("carousel__slide--mobile"),teamPosts[startTeam].classList.remove("carousel__slide--desktop"),startTeam++,teamPosts[startTeam].classList.add("carousel__slide--mobile"),endTeam++,teamPosts[endTeam].classList.add("carousel__slide--desktop")):startTeam<conutTeam-1&&teamPosts[startTeam].classList.contains("carousel__slide--mobile")&&(teamPosts[startTeam].classList.remove("carousel__slide--mobile"),startTeam++,teamPosts[startTeam].classList.add("carousel__slide--mobile"))})),prevTeam.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?startTeam>0&&teamPosts[startTeam].classList.contains("carousel__slide--mobile")&&teamPosts[startTeam].classList.contains("carousel__slide--desktop")&&(teamPosts[startTeam].classList.remove("carousel__slide--mobile"),teamPosts[endTeam].classList.remove("carousel__slide--desktop"),endTeam--,startTeam--,teamPosts[startTeam].classList.add("carousel__slide--mobile"),teamPosts[startTeam].classList.add("carousel__slide--desktop")):startTeam>0&&teamPosts[startTeam].classList.contains("carousel__slide--mobile")&&(teamPosts[startTeam].classList.remove("carousel__slide--mobile"),startTeam--,teamPosts[startTeam].classList.add("carousel__slide--mobile"))})));let phoneInputs=document.querySelectorAll(".imaskphone"),maskOptions={mask:"+{7}(000)000-00-00",lazy:!1};phoneInputs.forEach((e=>{IMask(e,maskOptions)}));let message,state,form=document.querySelector(".team__leade-feedback"),apeealWrapper=document.querySelector(".team__leader-appeal-wrapper"),appealMessage=document.querySelector(".team__leader-appeal"),appealLead=document.querySelector("[name=dir]"),appealToken=document.querySelector("[name=token]"),btnSend=document.querySelector(".team__leader-appeal-submit");btnSend&&appealMessage&&appealLead&&form&&btnSend.addEventListener("click",(e=>{e.preventDefault();let s="message="+appealMessage.value+"&lead="+appealLead.value+"&trace="+b24Tracker.guest.getTrace();message&&message.remove(),grecaptcha.ready((()=>{grecaptcha.execute("6LdkQqslAAAAAGfvORf8OCclMfKRQvRYaGAWdtjV",{action:"submit"}).then((e=>{s=s+"&token="+e,appealToken.value=e,doForms(s).then((e=>{apeealWrapper.remove(),message=form.appendChild(newMessage(e.message,e.result))})).catch((e=>{apeealWrapper.remove(),message=form.appendChild(newMessage(e,!1))}))}))}))}));let forms=document.querySelectorAll(".form-js");forms.forEach((e=>{let s,t,a,l;for(let o of e)"submit"==o.getAttribute("type")&&(l=o),"phone"==o.getAttribute("name")&&(t=o),"name"==o.getAttribute("name")&&(s=o),"lead"==o.getAttribute("name")&&(a=o),"token"==o.getAttribute("name")&&(secret=o);l&&l.addEventListener("click",(l=>{l.preventDefault();let o="name="+s.value+"&phone="+t.value+"&lead="+a.value+"&trace="+b24Tracker.guest.getTrace();message&&message.remove(),grecaptcha.ready((()=>{grecaptcha.execute("6LdkQqslAAAAAGfvORf8OCclMfKRQvRYaGAWdtjV",{action:"submit"}).then((s=>{o=o+"&token="+s,secret.value=s,doForms(o).then((s=>{message=e.appendChild(newMessage(s.message,s.result)),s.result&&(state="?state="+s.result,location="/thank.php"+state)})).catch((s=>{message=e.appendChild(newMessage(s,!1)),state=!1,location="/thank.php?state="+state}))}))}))}))}));let swiperPortf1=document.querySelector(".swiper-1"),swiperPortf2=document.querySelector(".swiper-2");if(swiperPortf1&&swiperPortf2)var swiper=new Swiper(".swiper-2",{lazy:!0,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0}),swiper2=new Swiper(".swiper-1",{lazy:!0,spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:swiper}});let groups=document.querySelectorAll(".price__table-group");groups&&groups.forEach((e=>{let s=e.querySelectorAll(".wp-block-button"),t=e.querySelectorAll(".wp-block-table");s.forEach(((e,a)=>{e.addEventListener("click",(e=>{if(!t[a])return null;s.forEach((e=>{e.classList.remove("examples__link--active")})),t.forEach((e=>{e.classList.remove("examples__tab--active")})),s[a].classList.add("examples__link--active"),t[a].classList.add("examples__tab--active")}))}))}));