const doForms=async e=>{const t=await fetch("/lib/run.php",{method:"POST",body:e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:"same-origin"});if(t.ok){const e=await t.json();return Promise.resolve(e)}return Promise.reject("Серверная ошибка отправки данных.")};function addSpace(e){return e.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")}let mediaWidth=document.documentElement.clientWidth;const newMessage=(e,t)=>{let s=document.createElement("span");return s.innerHTML=e,t?s.classList.add("success"):s.classList.add("error"),s};document.querySelector(".header--fix").classList.remove("header--fix");let h=document.querySelector(".header__wrapper");function onScroll(){window.addEventListener("scroll",(function(){window.pageYOffset>150?h.classList.add("header--fix"):h.classList.remove("header--fix")}))}window.onload=()=>{onScroll()},document.querySelector(".nav--nojs").classList.remove("nav--nojs");let burger=document.querySelector(".nav__burger"),menuMobile=document.querySelector(".nav__menu");if(burger.addEventListener("click",(e=>{e.preventDefault(),menuMobile.classList.toggle("nav__menu--open"),burger.classList.toggle("nav__burger--open")})),null!==document.querySelector("#calculator")){let e=document.querySelector("#calculator"),t=document.querySelector("[data-modal=calculator]"),s=e.querySelector(".modal__close");t&&t.addEventListener("click",(t=>{t.preventDefault(),e.classList.contains("modal--open")||e.classList.add("modal--open")})),s.addEventListener("click",(t=>{t.preventDefault(),e.classList.contains("modal--open")&&e.classList.remove("modal--open")}))}if(null!==document.querySelector(".header__calc")){let a=document.querySelector(".header__calc"),o=document.querySelector(".hero__calc");a&&(o?a.addEventListener("click",(e=>{e.preventDefault(),o.classList.toggle("hero__calc--open"),a.classList.toggle("header__calc--opened"),o.classList.contains("hero__calc-ext")&&o.classList.toggle("hero__calc--separate")})):a.addEventListener("click",(e=>{e.preventDefault(),modalCalc.classList.contains("modal--open")||modalCalc.classList.add("modal--open")})));let l=document.querySelector(".price__link-calk");l&&l.addEventListener("click",(e=>{e.preventDefault(),modalCalc.classList.contains("modal--open")||modalCalc.classList.add("modal--open")}))}if(null!==document.querySelector("#cost")){let r=document.querySelector("#cost"),i=document.querySelectorAll("[data-modal=cost]"),c=r.querySelector(".modal__close");r&&i&&c&&(i.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),r.classList.contains("modal--open")||r.classList.add("modal--open")}))})),c.addEventListener("click",(e=>{e.preventDefault(),r.classList.contains("modal--open")&&r.classList.remove("modal--open")})))}if(null!==document.querySelector("#contract")){let n=document.querySelector("#contract"),d=document.querySelectorAll("[data-modal=kontrakt]"),m=n.querySelector(".modal__close");n&&d&&m&&(d.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),n.classList.contains("modal--open")||n.classList.add("modal--open")}))})),m.addEventListener("click",(e=>{e.preventDefault(),n.classList.contains("modal--open")&&n.classList.remove("modal--open")})))}if(null!==document.querySelector("#callback")){let u=document.querySelector("#callback"),p=document.querySelectorAll("[data-modal=callback]"),_=u.querySelector(".modal__close");u&&p&&_&&(p.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),u.classList.contains("modal--open")||u.classList.add("modal--open")}))})),_.addEventListener("click",(e=>{e.preventDefault(),u.classList.contains("modal--open")&&u.classList.remove("modal--open")})))}if(null!==document.querySelector("#discount")){let v=document.querySelector("#discount"),L=document.querySelectorAll("[data-modal=discount]"),b=v.querySelector(".modal__close");v&&L&&b&&(L.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),v.classList.contains("modal--open")||v.classList.add("modal--open")}))})),b.addEventListener("click",(e=>{e.preventDefault(),v.classList.contains("modal--open")&&v.classList.remove("modal--open")})))}let btnPrev=document.querySelector(".videoreviews .carousel__prev"),btnNext=document.querySelector(".videoreviews .carousel__next"),videoPosts=document.querySelectorAll(".videoreviews__demo-item"),conutPosts=videoPosts.length,startIndx=0,endIndx=document.querySelectorAll(".videoreviews .carousel__slide--desktop").length-1;btnPrev&&btnNext&&videoPosts&&(btnNext.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?endIndx<conutPosts-1&&videoPosts[startIndx].classList.contains("carousel__slide--mobile")&&videoPosts[startIndx].classList.contains("carousel__slide--desktop")&&(videoPosts[startIndx].classList.remove("carousel__slide--mobile"),videoPosts[startIndx].classList.remove("carousel__slide--desktop"),startIndx++,videoPosts[startIndx].classList.add("carousel__slide--mobile"),endIndx++,videoPosts[endIndx].classList.add("carousel__slide--desktop")):startIndx<conutPosts-1&&videoPosts[startIndx].classList.contains("carousel__slide--mobile")&&(videoPosts[startIndx].classList.remove("carousel__slide--mobile"),startIndx++,videoPosts[startIndx].classList.add("carousel__slide--mobile"))})),btnPrev.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?startIndx>0&&videoPosts[startIndx].classList.contains("carousel__slide--mobile")&&videoPosts[startIndx].classList.contains("carousel__slide--desktop")&&(videoPosts[startIndx].classList.remove("carousel__slide--mobile"),videoPosts[endIndx].classList.remove("carousel__slide--desktop"),endIndx--,startIndx--,videoPosts[startIndx].classList.add("carousel__slide--mobile"),videoPosts[startIndx].classList.add("carousel__slide--desktop")):startIndx>0&&videoPosts[startIndx].classList.contains("carousel__slide--mobile")&&(videoPosts[startIndx].classList.remove("carousel__slide--mobile"),startIndx--,videoPosts[startIndx].classList.add("carousel__slide--mobile"))})));let prev=document.querySelector(".repairs__demo .carousel__prev"),next=document.querySelector(".repairs__demo .carousel__next"),repairPosts=document.querySelectorAll(".repairs__type"),conutRepairs=repairPosts.length,startRepairs=0,endRepairs=document.querySelectorAll(".repairs__types .carousel__slide--desktop").length-1;prev&&next&&repairPosts&&(next.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?endRepairs<conutRepairs-1&&repairPosts[startRepairs].classList.contains("carousel__slide--mobile")&&repairPosts[startRepairs].classList.contains("carousel__slide--desktop")&&(repairPosts[startRepairs].classList.remove("carousel__slide--mobile"),repairPosts[startRepairs].classList.remove("carousel__slide--desktop"),startRepairs++,repairPosts[startRepairs].classList.add("carousel__slide--mobile"),endRepairs++,repairPosts[endRepairs].classList.add("carousel__slide--desktop")):startRepairs<conutRepairs-1&&repairPosts[startRepairs].classList.contains("carousel__slide--mobile")&&(repairPosts[startRepairs].classList.remove("carousel__slide--mobile"),startRepairs++,repairPosts[startRepairs].classList.add("carousel__slide--mobile"))})),prev.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?startRepairs>0&&repairPosts[startRepairs].classList.contains("carousel__slide--mobile")&&repairPosts[startRepairs].classList.contains("carousel__slide--desktop")&&(repairPosts[startRepairs].classList.remove("carousel__slide--mobile"),repairPosts[endRepairs].classList.remove("carousel__slide--desktop"),endRepairs--,startRepairs--,repairPosts[startRepairs].classList.add("carousel__slide--mobile"),repairPosts[startRepairs].classList.add("carousel__slide--desktop")):startRepairs>0&&repairPosts[startRepairs].classList.contains("carousel__slide--mobile")&&(repairPosts[startRepairs].classList.remove("carousel__slide--mobile"),startRepairs--,repairPosts[startRepairs].classList.add("carousel__slide--mobile"))})));let prevTestestimonial=document.querySelector(".testimonials__video .carousel__prev"),nextTestestimonial=document.querySelector(".testimonials__video .carousel__next"),testimonialPosts=document.querySelectorAll(".testimonials__video-item"),conutTestestimonials=testimonialPosts.length,startTestestimonials=0,endTestestimonials=document.querySelectorAll(".testimonials__video-items .carousel__slide--desktop").length-1;prevTestestimonial&&nextTestestimonial&&testimonialPosts&&(nextTestestimonial.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?endTestestimonials<conutTestestimonials-1&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--mobile")&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--desktop")&&(testimonialPosts[startTestestimonials].classList.remove("carousel__slide--mobile"),testimonialPosts[startTestestimonials].classList.remove("carousel__slide--desktop"),startTestestimonials++,testimonialPosts[startTestestimonials].classList.add("carousel__slide--mobile"),endTestestimonials++,testimonialPosts[endTestestimonials].classList.add("carousel__slide--desktop")):startTestestimonials<conutTestestimonials-1&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--mobile")&&(testimonialPosts[startTestestimonials].classList.remove("carousel__slide--mobile"),startTestestimonials++,testimonialPosts[startTestestimonials].classList.add("carousel__slide--mobile"))})),prevTestestimonial.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?startTestestimonials>0&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--mobile")&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--desktop")&&(testimonialPosts[startTestestimonials].classList.remove("carousel__slide--mobile"),testimonialPosts[endTestestimonials].classList.remove("carousel__slide--desktop"),endTestestimonials--,startTestestimonials--,testimonialPosts[startTestestimonials].classList.add("carousel__slide--mobile"),testimonialPosts[startTestestimonials].classList.add("carousel__slide--desktop")):startTestestimonials>0&&testimonialPosts[startTestestimonials].classList.contains("carousel__slide--mobile")&&(testimonialPosts[startTestestimonials].classList.remove("carousel__slide--mobile"),startTestestimonials--,testimonialPosts[startTestestimonials].classList.add("carousel__slide--mobile"))})));let prevTeam=document.querySelector(".team__composition .carousel__prev"),nextTeam=document.querySelector(".team__composition .carousel__next"),teamPosts=document.querySelectorAll(".team__person"),conutTeam=teamPosts.length,startTeam=0,endTeam=document.querySelectorAll(".team__list .carousel__slide--desktop").length-1;prevTeam&&nextTeam&&teamPosts&&(nextTeam.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?endTeam<conutTeam-1&&teamPosts[startTeam].classList.contains("carousel__slide--mobile")&&teamPosts[startTeam].classList.contains("carousel__slide--desktop")&&(teamPosts[startTeam].classList.remove("carousel__slide--mobile"),teamPosts[startTeam].classList.remove("carousel__slide--desktop"),startTeam++,teamPosts[startTeam].classList.add("carousel__slide--mobile"),endTeam++,teamPosts[endTeam].classList.add("carousel__slide--desktop")):startTeam<conutTeam-1&&teamPosts[startTeam].classList.contains("carousel__slide--mobile")&&(teamPosts[startTeam].classList.remove("carousel__slide--mobile"),startTeam++,teamPosts[startTeam].classList.add("carousel__slide--mobile"))})),prevTeam.addEventListener("click",(e=>{e.preventDefault(),mediaWidth>1190?startTeam>0&&teamPosts[startTeam].classList.contains("carousel__slide--mobile")&&teamPosts[startTeam].classList.contains("carousel__slide--desktop")&&(teamPosts[startTeam].classList.remove("carousel__slide--mobile"),teamPosts[endTeam].classList.remove("carousel__slide--desktop"),endTeam--,startTeam--,teamPosts[startTeam].classList.add("carousel__slide--mobile"),teamPosts[startTeam].classList.add("carousel__slide--desktop")):startTeam>0&&teamPosts[startTeam].classList.contains("carousel__slide--mobile")&&(teamPosts[startTeam].classList.remove("carousel__slide--mobile"),startTeam--,teamPosts[startTeam].classList.add("carousel__slide--mobile"))})));let phoneInputs=document.querySelectorAll(".imaskphone"),maskOptions={mask:"+{7}(000)000-00-00",lazy:!1};phoneInputs.forEach((e=>{IMask(e,maskOptions)}));let message,state,form=document.querySelector(".team__leade-feedback"),appealMessage=document.querySelector(".team__leader-appeal"),appealLead=document.querySelector("[name=dir]"),appealToken=document.querySelector("[name=token]"),btnSend=document.querySelector(".team__leader-appeal-submit");btnSend&&appealMessage&&appealLead&&form&&btnSend.addEventListener("click",(e=>{e.preventDefault();let t="message="+appealMessage.value+"&lead="+appealLead.value+"&trace="+b24Tracker.guest.getTrace();message&&message.remove(),grecaptcha.ready((()=>{grecaptcha.execute("6Lc9prcmAAAAAP0LeLhmqduGqJXFEkipCuYGmQYn",{action:"submit"}).then((e=>{t=t+"&token="+e,appealToken.value=e,doForms(t).then((e=>{e.result&&(state="?state="+e.result,location="/thank/"+state)})).catch((e=>{state=!1,location="/thank/?state="+state}))}))}))}));let forms=document.querySelectorAll(".form-js");forms.forEach((e=>{let t,s,a,o;for(let l of e)"submit"==l.getAttribute("type")&&(o=l),"phone"==l.getAttribute("name")&&(s=l),"name"==l.getAttribute("name")&&(t=l),"lead"==l.getAttribute("name")&&(a=l),"token"==l.getAttribute("name")&&(secret=l);o&&o.addEventListener("click",(e=>{e.preventDefault();let o="name="+t.value+"&phone="+s.value+"&lead="+a.value+"&trace="+b24Tracker.guest.getTrace();message&&message.remove(),grecaptcha.ready((()=>{grecaptcha.execute("6Lc9prcmAAAAAP0LeLhmqduGqJXFEkipCuYGmQYn",{action:"submit"}).then((e=>{o=o+"&token="+e,secret.value=e,doForms(o).then((e=>{e.result&&(state="?state="+e.result,location="/thank/"+state)})).catch((e=>{state=!1,location="/thank/?state="+state}))}))}))}))}));let swiperPortf1=document.querySelector(".swiper-1"),swiperPortf2=document.querySelector(".swiper-2");if(swiperPortf1&&swiperPortf2)var swiper=new Swiper(".swiper-2",{lazy:!0,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0}),swiper2=new Swiper(".swiper-1",{lazy:!0,spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:swiper}});let groups=document.querySelectorAll(".price__table-group");groups&&groups.forEach((e=>{let t=e.querySelectorAll(".wp-block-button"),s=e.querySelectorAll(".wp-block-table");t.forEach(((e,a)=>{e.addEventListener("click",(e=>{if(!s[a])return null;t.forEach((e=>{e.classList.remove("examples__link--active")})),s.forEach((e=>{e.classList.remove("examples__tab--active")})),t[a].classList.add("examples__link--active"),s[a].classList.add("examples__tab--active")}))}))}));let contacts_maps=document.querySelectorAll(".maps__item"),contacts_address=document.querySelectorAll(".maps__address-item"),contacts_btn=document.querySelectorAll(".maps__control-button"),contacts_office=document.querySelectorAll(".contacts-page-office");if(contacts_maps&&contacts_address&&contacts_btn&&contacts_office){function contacts_toggler(){contacts_btn.forEach(((e,t)=>{e.addEventListener("click",(s=>{s.preventDefault(),console.log(123),contacts_btn.forEach((e=>{e.classList.remove("contacts-page--active-btn")})),contacts_maps.forEach((e=>{e.classList.remove("contacts-page--active")})),contacts_address.forEach((e=>{e.classList.remove("contacts-page--active")})),contacts_office.forEach((e=>{e.classList.remove("contacts-page--active")})),e.classList.add("contacts-page--active-btn"),contacts_maps[t].classList.add("contacts-page--active"),contacts_address[t].classList.add("contacts-page--active"),contacts_office[t].classList.add("contacts-page--active")}))}))}contacts_toggler()}let individual_content=document.querySelectorAll(".individual__content");individual_content&&individual_content.forEach((e=>{let t=e.querySelectorAll(".individual__btn-full"),s=e.querySelectorAll(".individual__list-disabled");t.forEach(((e,t)=>{e.addEventListener("click",(e=>{"Развернуть"===e.target.textContent?e.target.textContent="Свернуть":e.target.textContent="Развернуть",s.forEach((e=>{e.classList.toggle("individual--active")}))}))}))}));let supplyList=document.querySelectorAll(".supply__list");supplyList&&supplyList.forEach((e=>{let t=e.querySelectorAll(".supply__materials"),s=e.querySelectorAll(".supply__item-btn");s.forEach(((e,a)=>{e.addEventListener("click",(()=>{s[a].classList.contains("supply__item-btn-active")?(s[a].classList.remove("supply__item-btn-active"),t[a].classList.remove("supply__materials-active")):(s.forEach((e=>{e.classList.remove("supply__item-btn-active")})),t.forEach((e=>{e.classList.remove("supply__materials-active")})),s[a].classList.add("supply__item-btn-active"),t[a].classList.add("supply__materials-active"))}))}))}));const loadMore=async e=>{const t=await fetch("/wp-admin/admin-ajax.php",{method:"POST",body:e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:"same-origin"});if(t.ok){const e=await t.json();return Promise.resolve(e)}return Promise.reject("Не удалось отправить данные.")};function getData(e,t){return data="action=load_more_"+e.getAttribute("data-more")+"&paged="+t,data}let currentPage=1,btnMore=document.querySelector("[data-more]"),moreList=null!==document.querySelector(".examples__tab")?document.querySelector(".examples__tab"):"";null!==document.querySelector("[data-more]")&&btnMore&&""!==moreList&&btnMore.addEventListener("click",(e=>{e.preventDefault(),currentPage++,data=getData(btnMore,currentPage),loadMore(data).then((e=>{moreList.innerHTML+=e.html,currentPage>=e.max&&btnMore.remove()})).catch((e=>{moreList.appendChild(newMessage(e,!1))}))}));let calculatorRange=document.querySelector(".hero__calc-area-range");if(calculatorRange){let y=document.querySelector(".hero__calc-area-input"),P=document.querySelector("#construction-type"),f=document.querySelector("#repair-type"),S=document.querySelectorAll("[name=hrepairtype]"),g=document.querySelectorAll(".hero__calc-item--control"),k=document.querySelector(".hero__calc-total-js"),T=document.querySelector(".hero__calc-period-from"),q=document.querySelector(".hero__calc-period-to"),x=0,E=0,w=0,A=0,R=0,I=0,D=0,F=0,M=0;function calcUpdate(){x=parseFloat(f.value),E=parseFloat(P.value),w=parseFloat(document.querySelector("[name=hrepairtype]:checked").value),A=1+calculateAdditional(),R=x*E*w*A,I=parseInt(calculatorRange.value),D=(R*I).toFixed(0),F=(D/1e4).toFixed(0),M=(D/7e3).toFixed(0),D=(.09*D).toFixed(0),k.textContent=addSpace(D),T.textContent=F,q.textContent=M}function calculateAdditional(){let e=0;return g.forEach((t=>{t.checked&&(e+=parseFloat(t.value))})),e}calcUpdate(),calculatorRange.addEventListener("input",(()=>{y.value=calculatorRange.value,I=parseInt(y.value),calcUpdate()})),y.addEventListener("input",(()=>{calculatorRange.value=y.value,I=parseInt(calculatorRange.value),calcUpdate()})),f.addEventListener("input",(()=>{x=parseFloat(f.value),calcUpdate()})),P.addEventListener("input",(()=>{E=parseFloat(P.value),calcUpdate()})),S.forEach((e=>{e.addEventListener("input",(t=>{w=parseFloat(e.value),calcUpdate()}))})),g.forEach((e=>{e.addEventListener("input",(e=>{A=calculateAdditional(),calcUpdate()}))}))}